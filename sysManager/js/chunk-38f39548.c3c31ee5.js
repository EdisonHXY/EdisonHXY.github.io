(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38f39548"],{"30bb":function(a,e,t){"use strict";t("f409")},6838:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[t("el-col",{staticClass:"boderDes",attrs:{span:12}},[t("div",[t("h4",{staticStyle:{"margin-left":"20px"}},[a._v("操作日志查询")]),t("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[t("el-form",{attrs:{inline:!0,"label-position":"left","label-width":"70px",model:a.operatForm}},[t("el-form-item",{attrs:{label:"操作者"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.operatForm.user,callback:function(e){a.$set(a.operatForm,"user",e)},expression:"operatForm.user"}},a._l(a.userList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"车站"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.operatForm.station,callback:function(e){a.$set(a.operatForm,"station",e)},expression:"operatForm.station"}},a._l(a.stationList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"设备"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.operatForm.dev,callback:function(e){a.$set(a.operatForm,"dev",e)},expression:"operatForm.dev"}},a._l(a.devList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"时间"}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:a.operatForm.timeArr,callback:function(e){a.$set(a.operatForm,"timeArr",e)},expression:"operatForm.timeArr"}})],1)],1),t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return a.search(!1)}}},[a._v("查询")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:a.delBtnDisable.opera},on:{click:function(e){return a.deleteData(!1)}}},[a._v("删除")]),t("el-button",{attrs:{type:"warning",icon:"el-icon-s-promotion"},on:{click:function(e){return a.exportData(!1)}}},[a._v("导出")]),t("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(e){return a.printAlarm(!1)}}},[a._v("打印")])],1),t("edit-table",{ref:"operaTable",attrs:{addSerialNum:!0,table_ui_data:a.uiList,table_data:a.operatTableData,table_disable_edit:!1,table_id:"operaTable",pageSize:6},on:{rowClick:a.rowOperaClick}})],1)])]),t("el-col",{staticStyle:{"margin-left":"60px"},attrs:{span:11}},[t("div",{staticClass:"boderDes"},[t("h4",{staticStyle:{"margin-left":"20px"}},[a._v("告警日志查询")]),t("div",{staticStyle:{"margin-right":"20px","margin-left":"20px","margin-bottom":"20px"}},[t("el-form",{attrs:{inline:!0,"label-position":"left","label-width":"70px",model:a.alarmForm}},[t("el-form-item",{attrs:{label:"处理人"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.alarmForm.user,callback:function(e){a.$set(a.alarmForm,"user",e)},expression:"alarmForm.user"}},a._l(a.userList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"车站"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.alarmForm.station,callback:function(e){a.$set(a.alarmForm,"station",e)},expression:"alarmForm.station"}},a._l(a.stationList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"设备"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.alarmForm.dev,callback:function(e){a.$set(a.alarmForm,"dev",e)},expression:"alarmForm.dev"}},a._l(a.devList,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id+" "+a.name,value:a.id}})})),1)],1),t("el-form-item",{attrs:{label:"时间"}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:a.alarmForm.timeArr,callback:function(e){a.$set(a.alarmForm,"timeArr",e)},expression:"alarmForm.timeArr"}})],1)],1),t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return a.search(!0)}}},[a._v("查询")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:a.delBtnDisable.alarm},on:{click:function(e){return a.deleteData(!0)}}},[a._v("删除")]),t("el-button",{attrs:{type:"warning",icon:"el-icon-s-promotion"},on:{click:function(e){return a.exportData(!0)}}},[a._v("导出")]),t("el-button",{attrs:{type:"success",icon:"el-icon-printer"},on:{click:function(e){return a.printAlarm(!0)}}},[a._v("打印")])],1),t("edit-table",{ref:"alarmTable",attrs:{addSerialNum:!0,table_ui_data:a.alarmUiList,table_data:a.alarmTableData,table_disable_edit:!1,table_id:"alarmTable",unique_id:["uniqueID"],tableAttri:a.tableAttri,pageSize:6},on:{rowClick:a.rowAlarmClick,dbRowClick:a.dbRowAlarmClick}})],1)])])],1),t("el-dialog",{attrs:{title:"告警日志",visible:a.dialogInfo.visible,width:"30%"},on:{"update:visible":function(e){return a.$set(a.dialogInfo,"visible",e)}}},[t("div",{staticClass:"boderDes_q"},[t("h3",{staticStyle:{"margin-left":"20px"}},[a._v("告警描述")]),t("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t("el-form",{attrs:{model:a.dialogInfo.alarmForm,"label-width":"80px"}},[t("el-row",[t("el-form-item",{attrs:{label:"设备名",prop:"dev"}},[t("el-co1",{attrs:{span:8}},[t("el-input",{attrs:{disabled:"",readonly:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.dev,callback:function(e){a.$set(a.dialogInfo.alarmForm,"dev",e)},expression:"dialogInfo.alarmForm.dev"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"车站名",prop:"staName"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.staName,callback:function(e){a.$set(a.dialogInfo.alarmForm,"staName",e)},expression:"dialogInfo.alarmForm.staName"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"告警时刻",prop:"time"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.time,callback:function(e){a.$set(a.dialogInfo.alarmForm,"time",e)},expression:"dialogInfo.alarmForm.time"}})],1)],1)],1),t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"线路名称",prop:"lineName"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.lineName,callback:function(e){a.$set(a.dialogInfo.alarmForm,"lineName",e)},expression:"dialogInfo.alarmForm.lineName"}})],1)],1)],1),t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"告警内容",prop:"content"}},[t("el-input",{attrs:{type:"textarea",readonly:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.content,callback:function(e){a.$set(a.dialogInfo.alarmForm,"content",e)},expression:"dialogInfo.alarmForm.content"}})],1)],1)],1)],1)],1)]),t("div",{staticClass:"boderDes_q"},[t("h3",{staticStyle:{"margin-left":"20px"}},[a._v("处理描述")]),t("div",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t("el-form",{attrs:{model:a.dialogInfo.alarmForm,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"处理标记",prop:"tag"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.tag,callback:function(e){a.$set(a.dialogInfo.alarmForm,"tag",e)},expression:"dialogInfo.alarmForm.tag"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"处理时间",prop:"proTime"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.proTime,callback:function(e){a.$set(a.dialogInfo.alarmForm,"proTime",e)},expression:"dialogInfo.alarmForm.proTime"}})],1)],1)],1),t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"处理人",prop:"autor"}},[t("el-input",{attrs:{readonly:"",disabled:"",placeholder:""},model:{value:a.dialogInfo.alarmForm.autor,callback:function(e){a.$set(a.dialogInfo.alarmForm,"autor",e)},expression:"dialogInfo.alarmForm.autor"}})],1)],1)],1),t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"处理办法",prop:"bf"}},[t("el-input",{attrs:{type:"textarea",readonly:"1"==a.dialogInfo.alarmForm.tag,placeholder:""},model:{value:a.dialogInfo.alarmForm.bf,callback:function(e){a.$set(a.dialogInfo.alarmForm,"bf",e)},expression:"dialogInfo.alarmForm.bf"}})],1)],1)],1)],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",disabled:"1"==a.dialogInfo.alarmForm.tag},on:{click:a.dialogHandBtn}},[a._v("处 理")]),t("el-button",{on:{click:function(e){a.dialogInfo.visible=!1}}},[a._v("退 出")])],1)])],1)},r=[],o=t("5c96"),i={data:function(){return{uiList:[{label:"操作者",prop:"autor",disabled:!0},{label:"操作类型",prop:"type",disabled:!0},{label:"操作内容",prop:"content",disabled:!0},{label:"操作时间",prop:"time",disabled:!0,sortable:!0},{label:"设备名",prop:"devName",disabled:!0},{label:"车站名",prop:"staName",disabled:!0},{label:"线路名",prop:"lineName",disabled:!0}],alarmUiList:[{label:"告警设备",prop:"dev",disabled:!0},{label:"告警内容",prop:"content",disabled:!0},{label:"告警时间",prop:"time",disabled:!0,sortable:!0,width:120},{label:"标记",prop:"tag",disabled:!0,formatter:function(a,e,t){var l="";return l="1"==t?"已处理":"未处理",l}},{label:"处理人",prop:"autor",disabled:!0},{label:"处理办法",prop:"bf",disabled:!0},{label:"车站名",prop:"staName",disabled:!0},{label:"线路名称",prop:"lineName",disabled:!0}],tableAttri:{cellStyle:function(a){var e=a.row;return"1"==e.tag?"color: #0CB618":"color: #EA1B29"}},stationList:[],devList:[],userList:[],operatForm:{user:"",station:"",dev:"",timeArr:[]},alarmForm:{user:"",station:"",dev:"",timeArr:[]},operatTableData:[],alarmTableData:[],delBtnDisable:{opera:!0,alarm:!0},rowCurAlarm:{},rowCurOpera:{},dialogInfo:{visible:!1,alarmForm:{}}}},mounted:function(){var a=this;this.$httpApi.user_list().then((function(e){"0"==e.data.code&&(a.userList=e.data.dataList)})),this.$httpApi.station_list().then((function(e){"0"==e.data.code&&(a.stationList=e.data.dataList)})),this.$httpApi.dev_list().then((function(e){"0"==e.data.code&&(a.devList=e.data.dataList)}))},methods:{dialogHandBtn:function(){this.dialogInfo.visible=!1;var a=this;this.$httpApi.alarm_handle(this.dialogInfo.alarmForm).then((function(e){"0"!=e.data.code?o["Message"].error(e.data.message):a.dialogInfo.alarmForm.tag="1"}))},rowAlarmClick:function(a){this.rowCurAlarm=a,this.delBtnDisable.alarm=void 0==a},dbRowAlarmClick:function(a){this.dialogInfo.alarmForm=a,this.dialogInfo.visible=!0},rowOperaClick:function(a){this.rowCurOpera=a,this.delBtnDisable.opera=void 0==a},search:function(a){var e=this;a?this.$httpApi.search_alarm_log(this.alarmForm).then((function(a){"0"==a.data.code?e.alarmTableData=a.data.dataList:o["Message"].error(a.data.message)})):this.$httpApi.search_opera_log(this.operatForm).then((function(a){"0"==a.data.code?e.operatTableData=a.data.dataList:o["Message"].error(a.data.message)}))},deleteData:function(a){a?this.$refs.alarmTable.deleteAction():this.$refs.operaTable.deleteAction(this.rowCurOpera)},exportData:function(a){var e=new Date,t=e.getFullYear(),l=e.getMonth()+1,r=e.getDate(),o=e.getHours(),i=e.getMinutes(),n=e.getSeconds(),s=t+"-"+l+"-"+r+"_"+o+"_"+i+"_"+n+".xlsx";a?this.$refs.alarmTable.exportDataToExcel(s):this.$refs.operaTable.exportDataToExcel(s)},printAlarm:function(a){a?this.$refs.alarmTable.printExcel():this.$refs.operaTable.printExcel()}}},n=i,s=(t("30bb"),t("2877")),d=Object(s["a"])(n,l,r,!1,null,"271ff726",null);e["default"]=d.exports},f409:function(a,e,t){}}]);
//# sourceMappingURL=chunk-38f39548.c3c31ee5.js.map