(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-273d62aa"],{8460:function(t,a,i){},"9c55":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[i("el-col",{staticClass:"colGroup",attrs:{span:8}},[i("h4",{staticStyle:{"margin-left":"20px"}},[t._v("ATS组播参数")]),i("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[i("el-button",{attrs:{type:"primary",disabled:t.initFlDisable},on:{click:t.initAts}},[t._v(" 初始化 ")]),i("el-button",{attrs:{type:"success",disabled:t.atsSaveDisable},on:{click:function(a){return t.saveAts()}}},[t._v(" 保存 ")]),i("div",{staticStyle:{"margin-top":"20px"}},[i("edit-table",{ref:"edtableAts",attrs:{table_ui_data:t.atsUiData,table_data:t.tableData,table_disable_edit:!1,unique_id:["lineId"]},on:{dataChanged:t.atsDataChanged}})],1)],1)]),i("el-col",{staticClass:"colGroup",attrs:{span:15}},[i("h4",{staticStyle:{"margin-left":"20px"}},[t._v("首末班车参数")]),i("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[i("el-form",{attrs:{inline:!0,"label-position":"left"}},[i("el-form-item",{attrs:{label:"线路选择"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectLineId,callback:function(a){t.selectLineId=a},expression:"selectLineId"}},t._l(t.lineList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.id+" "+t.name,value:t.id}})})),1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:t.initFlDisable},on:{click:t.initFL}},[t._v(" 初始化 ")]),i("el-button",{attrs:{type:"success",disabled:t.flSaveDisable},on:{click:t.saveFL}},[t._v(" 保存 ")])],1)],1),i("div",[i("edit-table",{ref:"edtableFl",attrs:{table_ui_data:t.flUiData,table_data:t.tableData_FL,table_disable_edit:!1,unique_id:["name"]},on:{dataChanged:t.flDataChanged}})],1)],1)]),i("tipDialog",{attrs:{dialog:t.dialogOb},on:{okClick:t.dialogClick}})],1)],1)},l=[],s=(i("159b"),i("5c96")),n=i("d7af"),o={components:{tipDialog:n["a"]},data:function(){return{atsSaveDisable:!0,flSaveDisable:!0,tableData:[],initFlDisable:!0,tableData_FL:[],lineList:[],selectLineId:"",dialogOb:{visible:!1,title:"提示",tipMsg:"",trsfParm:{}},atsUiData:[{label:"线路",prop:"lineId",disabled:!0},{label:"组播地址",prop:"address"},{label:"端口",prop:"port"}],flUiData:[{label:"车站名称",prop:"name",disabled:!0},{label:"上行方向",prop:"up",uiType:1,selectlist:[]},{label:"首班车",prop:"fTrian_up"},{label:"末班车",prop:"lTrain_up"},{label:"下行方向",prop:"down",uiType:1,selectlist:[]},{label:"首班车",prop:"fTrian_down"},{label:"末班车",prop:"lTrain_down"}]}},watch:{selectLineId:function(t,a){console.log("线路切换",t,a),this.flSaveDisable||console.log("待完善");var i=this;this.$httpApi.lineList(t).then((function(t){if("0"==t.data.code){var a=t.data.dataList;console.log(i.selectStaList),a.forEach((function(t){t.val=t.id})),i.flUiData.forEach((function(t){t.uiType&&(t.selectlist=a)}))}})),this.$httpApi.trainInfo(t).then((function(t){"0"==t.data.code&&(i.tableData_FL=t.data.list,i.$refs.edtableFl.initCurrentData(i.tableData_FL))}))}},methods:{initAtsTableData:function(){var t=this;this.tableData=new Array,this.lineList.forEach((function(a){var i={};i.lineId=a.id,i.address="224.3.1.1",i.port="7650",i.isEdit=!1,t.tableData.push(i)}))},initAts:function(){this.tableData&&this.tableData.length>0?(this.dialogOb.tipMsg="初始化将清除列表中的数据,是否继续?",this.dialogOb.trsfParm.isAts=!0,this.dialogOb.visible=!0):this.initAtsTableData()},saveAts:function(){var t=this;this.$refs.edtableAts.confirmOKAction((function(a,i){1==i?t.$httpApi.add_atsMc(a).then((function(t){0!=t.data.code&&s["Message"].error(t.data.message)})):2==i&&t.$httpApi.up_atsMc(a).then((function(t){0!=t.data.code&&s["Message"].error(t.data.message)}))}))},dialogClick:function(t){t.isAts?this.initAtsTableData():this.initFSTableData()},atsDataChanged:function(t){this.atsSaveDisable=0==t},flDataChanged:function(t){this.flSaveDisable=0==t},initFSTableData:function(){this.tableData_FL=new Array;var t=this;this.$httpApi.lineList(this.selectLineId).then((function(a){if("0"==a.data.code){var i=a.data.dataList;i&&i.forEach((function(a){var i={};i.name=a.id,i.up="",i.fTrian_up="05:00:00",i.lTrain_up="23:00:00",i.down="",i.fTrian_down="05:00:00",i.lTrain_down="23:00:00",i.isEdit=!1,t.tableData_FL.push(i)}))}}))},initFL:function(){this.tableData_FL&&this.tableData_FL.length>0?(this.dialogOb.tipMsg="初始化将清除列表中的数据,是否继续?",this.dialogOb.trsfParm.isAts=!1,this.dialogOb.visible=!0):this.initFSTableData()},saveFL:function(){var t=this;this.$refs.edtableFl.confirmOKAction((function(a,i){1==i?t.$httpApi.add_trainInfo(t.selectLineId,a).then((function(t){0!=t.data.code&&s["Message"].error(t.data.message)})):2==i&&t.$httpApi.up_trainInfo(t.selectLineId,a).then((function(t){0!=t.data.code&&s["Message"].error(t.data.message)}))}))}},mounted:function(){var t=this;t.tableData_FL=[],this.$httpApi.atsMcList_get().then((function(a){"0"==a.data.code&&(t.tableData=a.data.list,t.$refs.edtableAts.initCurrentData(t.tableData))})),this.$httpApi.lineInfo("0").then((function(a){"0"==a.data.code&&(t.lineList=a.data.dataList,t.lineList&&t.lineList.length>0?(t.selectLineId=t.lineList[0].id,t.initFlDisable=!1):t.initFlDisable=!0)}))}},r=o,d=(i("b116"),i("2877")),c=Object(d["a"])(r,e,l,!1,null,"5fae4b31",null);a["default"]=c.exports},b116:function(t,a,i){"use strict";i("8460")},d7af:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("el-dialog",{attrs:{center:"",title:t.dialog.title,visible:t.dialog.visible,width:"20%"},on:{"update:visible":function(a){return t.$set(t.dialog,"visible",a)}}},[i("span",[t._v(t._s(t.dialog.tipMsg))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(a){t.dialog.visible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.dialogOkClick}},[t._v("确 定")])],1)])],1)},l=[],s={props:{dialog:{visible:!1,title:"提示",tipMsg:"",trsfParm:{}}},methods:{dialogOkClick:function(){this.dialog.visible=!1,this.$emit("okClick",this.dialog.trsfParm)}}},n=s,o=i("2877"),r=Object(o["a"])(n,e,l,!1,null,null,null);a["a"]=r.exports}}]);
//# sourceMappingURL=chunk-273d62aa.4a63adf7.js.map