(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13a7c2fe"],{7622:function(t,e,a){},"98c0":function(t,e,a){"use strict";a("7622")},d7af:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{center:"",title:t.dialog.title,visible:t.dialog.visible,width:"20%"},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[a("span",[t._v(t._s(t.dialog.tipMsg))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog.visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.dialogOkClick}},[t._v("确 定")])],1)])],1)},l=[],s={props:{dialog:{visible:!1,title:"提示",tipMsg:"",trsfParm:{}}},methods:{dialogOkClick:function(){this.dialog.visible=!1,this.$emit("okClick",this.dialog.trsfParm)}}},n=s,o=a("2877"),d=Object(o["a"])(n,i,l,!1,null,null,null);e["a"]=d.exports},fb0a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-right":"10px","margin-left":"10px"}},[a("div",{staticClass:"boderDes"},[a("h4",{staticStyle:{"margin-left":"20px"}},[t._v("ATS映射设置")]),a("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[a("el-form",{attrs:{inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"线路选择"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectLineId,callback:function(e){t.selectLineId=e},expression:"selectLineId"}},t._l(t.lineList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.id+" "+t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectDevType,callback:function(e){t.selectDevType=e},expression:"selectDevType"}},t._l(t.devTypeList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.id+" "+t.name,value:t.id}})})),1)],1),a("el-form-item",{staticStyle:{"padding-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:t.btnDisable.ini},on:{click:t.initClick}},[t._v("初始化")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:t.btnDisable.del},on:{click:t.delClick}},[t._v("删除")]),a("el-button",{attrs:{type:"success",disabled:t.btnDisable.save},on:{click:t.saveClick}},[t._v("保存")])],1)],1)],1)]),a("edit-table",{ref:"edtable",attrs:{table_ui_data:t.uiList,table_data:t.tableData,table_disable_edit:!1,unique_id:["stationName","devName"]},on:{rowClick:t.rowClick,dataChanged:t.tableDataChanged}})],1),a("tipDialog",{attrs:{dialog:t.dialogOb},on:{okClick:t.dialogClick}})],1)},l=[],s=(a("159b"),a("5c96")),n=a("d7af"),o={components:{tipDialog:n["a"]},data:function(){return{uiList:[{label:"车站名称",prop:"stationName",disabled:!0},{label:"设备名",prop:"devName",disabled:!0},{label:"ATS编号1",prop:"ats1"},{label:"标记1",prop:"tag1"},{label:"ATS编号2",prop:"ats2"},{label:"标记2",prop:"tag2"},{label:"ATS编号3",prop:"ats3"},{label:"标记3",prop:"tag3"},{label:"ATS编号4",prop:"ats4"},{label:"标记4",prop:"tag4"}],tableData:[],btnDisable:{ini:!0,del:!0,save:!0},lineList:[],selectLineId:"",devTypeList:[],selectDevType:"",dialogOb:{visible:!1,title:"提示",tipMsg:"",trsfParm:{}},currentSelRow:void 0}},mounted:function(){var t=this;this.$httpApi.lineInfo("0").then((function(e){"0"==e.data.code&&(t.lineList=e.data.dataList,t.lineList&&t.lineList.length>0?(t.selectLineId=t.lineList[0].id,t.btnDisable.ini=!1):t.btnDisable.ini=!0)})),this.$httpApi.typdeList().then((function(e){"0"==e.data.code&&(t.devTypeList=e.data.dataList)})).catch((function(){}))},watch:{lineAndDevTypeChanged:function(t,e){console.log("lineAndDevTypeChanged",t,e);var a=this;this.$httpApi.ats_map_get(this.selectLineId,this.selectDevType).then((function(t){"0"==t.data.code&&(a.tableData=t.data.dataList,a.$refs.edtable.initCurrentData(a.tableData))}))}},computed:{lineAndDevTypeChanged:function(){var t=this.selectLineId,e=this.selectDevType;return{ll:t,dev:e}}},methods:{initTableData:function(){var t=this;this.tableData=new Array,this.$httpApi.devlist_type_get(this.selectLineId,this.selectDevType).then((function(e){if("0"==e.data.code){var a=e.data.dataList;a.forEach((function(e){var a={stationName:e.staName,devName:e.devName,devCode:e.devCode,stationCode:e.staCode,ats1:"",tag1:0,ats2:"",tag2:0,ats3:"",tag3:0,ats4:"",tag4:0};t.tableData.push(a)}))}else s["Message"].error(e.data.message)}))},initClick:function(){this.tableData&&this.tableData.length>0?(this.dialogOb.tipMsg="初始化将清除列表中的数据,是否继续?",this.dialogOb.visible=!0):this.initTableData()},dialogClick:function(){this.initTableData()},rowClick:function(t){this.currentSelRow=t,this.btnDisable.del=void 0==t},delClick:function(){var t=this;t.$refs.edtable.deleteAction(this.currentSelRow)},saveClick:function(){var t=this;this.$refs.edtable.confirmOKAction((function(e,a){var i=JSON.parse(JSON.stringify(e));i.lineId=t.selectLineId,1==a?(console.log("add",e),t.$httpApi.ats_map_addl(i).then((function(t){"0"!=t.data.code&&s["Message"].error(t.data.message)}))):2==a?(console.log("upda"),t.$httpApi.ats_map_updata(i).then((function(t){"0"!=t.data.code&&s["Message"].error(t.data.message)}))):3==a&&(console.log("del"),t.$httpApi.ats_map_del(i).then((function(t){"0"!=t.data.code&&s["Message"].error(t.data.message)})))}))},tableDataChanged:function(t){this.btnDisable.save=0==t}}},d=o,c=(a("98c0"),a("2877")),r=Object(c["a"])(d,i,l,!1,null,null,null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-13a7c2fe.1242abdf.js.map